!function(e){"use strict";function n(e){this.$el=e,this.$mediaSections=this.$el.find(".nectar-sticky-media-section__featured-media"),this.$contentSections=this.$el.find(".nectar-sticky-media-section__content"),this.usingFrontEndEditor=!(!window.nectarDOMInfo||!window.nectarDOMInfo.usingFrontEndEditor),this.direction="down",this.prevScroll=0,this.activeIndex=0,this.prevIndex=-1,this.events()}var i=n.prototype;i.events=function(){this.usingFrontEndEditor&&this.rebuildMedia(),window.nectarDOMInfo&&window.nectarDOMInfo.usingMobileBrowser&&window.nectarDOMInfo.winW<1e3||(this.observe(),this.trackDirection(),this.verticallyCenter(),e(window).on("resize",this.verticallyCenter.bind(this)))},i.verticallyCenter=function(){if(window.nectarDOMInfo){var n=0;n=e("body").is('[data-header-format="left-header"]')||e("body").is('[data-hhun="1"]')||e("#header-outer").length>0&&e("#header-outer").is('[data-permanent-transparent="1"]')||e(".page-template-template-no-header-footer").length>0||e(".page-template-template-no-header").length>0?0:e("#header-space").length>0?e("#header-space").height():0,window.nectarDOMInfo.adminBarHeight>0&&(n+=window.nectarDOMInfo.adminBarHeight);var i=(window.nectarDOMInfo.winH-this.$mediaSections.height())/2+n/2;this.$el[0].style.setProperty("--nectar-sticky-media-sections-vert-y",i+"px")}},i.trackDirection=function(){window.nectarDOMInfo.scrollTop!=this.prevScroll?(window.nectarDOMInfo.scrollTop>this.prevScroll?this.direction="down":this.direction="up",this.prevScroll=window.nectarDOMInfo.scrollTop,window.requestAnimationFrame(this.trackDirection.bind(this))):window.requestAnimationFrame(this.trackDirection.bind(this))},i.observe=function(){var n=this;this.sections=Array.from(this.$contentSections.find("> div")),"IntersectionObserver"in window&&(window.nectarDOMInfo.usingMobileBrowser&&window.nectarDOMInfo.winW<1e3?(this.mobileObserver=new IntersectionObserver(function(i){i.forEach(function(i){if(i.isIntersecting){var t=e(i.target).index(),o=n.$contentSections.find("> .nectar-sticky-media-section__content-section:eq("+t+")");o.find("video.no-loop").length>0&&n.playSectionVideo(o.find("video.no-loop")[0]),n.mobileObserver.unobserve(i.target)}})},{rootMargin:"-5% 0% -5% 0%",threshold:0}),this.$contentSections.find("> div").each(function(){n.mobileObserver.observe(e(this)[0])})):(this.observer=new IntersectionObserver(function(i){i.forEach(function(i){if(i.isIntersecting){var t=e(i.target).index();n.activeIndex=t;var o=n.$mediaSections.find("> .nectar-sticky-media-section__media-wrap:eq("+t+")"),r=n.$contentSections.find("> .nectar-sticky-media-section__content-section:eq("+t+")"),s=n.$mediaSections.find("> .nectar-sticky-media-section__media-wrap");if(n.activeIndex==n.prevIndex)return;s.removeClass("active"),o.addClass("active"),o.hasClass("pause-trigger")||(o.find("video.no-loop").length>0&&window.nectarDOMInfo.winW>999&&n.playSectionVideo(o.find("video.no-loop")[0]),r.find("video.no-loop").length>0&&window.nectarDOMInfo.winW<1e3&&n.playSectionVideo(r.find("video.no-loop")[0])),0==t||t==n.$contentSections.find("> div").length-1?o.addClass("pause-trigger"):s.removeClass("pause-trigger"),n.prevIndex=t}})},{rootMargin:"-50% 0% -50% 0%",threshold:0}),this.$contentSections.find("> div").each(function(){n.observer.observe(e(this)[0])})))},i.playSectionVideo=function(e){e.pause(),e.currentTime=0,e.play()},i.shouldUpdate=function(n){return!!("down"===this.direction&&!n.isIntersecting||"down"===this.direction&&n.isIntersecting&&0==e(n.target).index())||!("up"!==this.direction||!n.isIntersecting)},i.rebuildMedia=function(){var n=this,i=[];this.$contentSections.find(".nectar-sticky-media-section__content-section").each(function(n){e(this).find(".nectar-sticky-media-content__media-wrap").length>1&&e(this).find(".nectar-sticky-media-content__media-wrap").each(function(n){n>0&&e(this).remove()}),i[n]=e(this).find(".nectar-sticky-media-content__media-wrap").clone(),i[n].removeClass("nectar-sticky-media-content__media-wrap").addClass("nectar-sticky-media-section__media-wrap")}),n.$mediaSections.html(" "),i.forEach(function(e){n.$mediaSections.append(e)}),e(window).trigger("salient-lazyloading-image-reinit")};var t=[];function o(){t=[],e(".nectar-sticky-media-sections").each(function(i){t[i]=new n(e(this))})}e(document).ready(function(){o(),e(window).on("vc_reload",function(){setTimeout(o,200)})})}(jQuery);